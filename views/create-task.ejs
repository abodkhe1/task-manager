<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proveway | Task Manager App</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <link rel="stylesheet" href="../public/style.css">
</head>

<body>
  <%- include('nav') %>

    <div class="container m-5 d-flex justify-content-center">
      <div class="card bg-dark text-light p-4 shadow-lg" style="width: 40rem;">
        <h1 class="text-center mb-4">Create New Task</h1>
        <form action="<%= task._id ? '/tasks/' + task._id + '?_method=PUT' : '/tasks' %>" method="POST">
          <div class="mb-3">
            <label for="title" class="form-label">Task Title:</label>
            <input type="text" class="form-control" name="title" value="<%= task.title || '' %>" required>
          </div>
        
          <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <textarea name="description" class="form-control"><%= task.description || '' %></textarea>
          </div>
        
          <div class="mb-3">
            <label for="status" class="form-label">Status:</label>
            <select name="status" class="form-select">
              <option value="<%= task.status || '' %>"><%= task.status || 'Select Status' %></option>
              <option value="pending">Pending</option>
              <option value="in-progress">In Progress</option>
              <option value="completed">Completed</option>
            </select>
          </div>
        
          <div class="mb-3">
            <label for="dueDate" class="form-label">Due Date:</label>
            <input type="date" class="form-control" name="dueDate" value="<%= task.dueDate ? task.dueDate.toISOString().split('T')[0] : '' %>">
          </div>
        
          <div class="mb-3">
            <label for="category" class="form-label">Category:</label>
            <select name="category" class="form-select">
              <option value="">Select Category</option>
              <% categories.forEach(category => { %>
                <option value="<%= category._id %>" <%= task.category && task.category._id.toString() === category._id.toString() ? 'selected' : '' %>>
                  <%= category.name %>
                </option>
              <% }) %>
            </select>
          </div>
        
          <div class="text-center">
            <button type="submit" class="btn btn-primary w-50">Create Task</button>
          </div>
        </form>
        
        
      </div>
    </div>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>
</body>

</html>
